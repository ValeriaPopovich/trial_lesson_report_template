<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–û—Ç—á—ë—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–±–Ω–æ–≥–æ —É—Ä–æ–∫–∞</title>

  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --pink: #f8c8dc;
      --peach: #ffd8b5;
      --mint: #c9f4e6;
      --bg: #fffaf8;
      --text: #5e4242;
      --radius: 26px;
      --shadow: 0 6px 18px rgba(0,0,0,0.08);
      --error: #ff6b6b;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 24px;
      background: var(--bg);
      font-family: "Nunito", sans-serif;
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .page {
      width: 100%;
      max-width: 900px;
      background: white;
      border-radius: 40px;
      padding: 32px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .header {
      background: linear-gradient(120deg,#f8c8dc,#c9f4e6);
      padding: 28px;
      border-radius: 32px;
      text-align: center;
      box-shadow: var(--shadow);
    }

    .header h1 {
      margin: 0;
      font-weight: 800;
      font-size: 2rem;
    }

    /* --- GRID –î–õ–Ø –î–ê–ù–ù–´–• –£–ß–ï–ù–ò–ö–ê --- */
    .info-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
    }

    @media (max-width: 900px) {
      .info-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .info-grid {
        grid-template-columns: 1fr;
      }

      .info-card {
        padding: 12px 14px !important;
        border-radius: 28px !important;
      }

      .page {
        padding: 20px 16px !important;
      }
    }

    .info-card {
      background: var(--peach);
      border-radius: 40px;
      padding: 16px;
      box-shadow: var(--shadow);
    }

    .info-label { font-weight: 700; }

    .info-input {
      border: none;
      background: transparent;
      padding: 6px 0;
      width: 100%;
      font-size: 1rem;
      display: block;
      will-change: transform;
    }

    .input-error {
      border-bottom: 2px solid var(--error) !important;
      background: #ffecec !important;
    }

    .error-text {
      font-size: .75rem;
      color: var(--error);
      display: none;
    }

    textarea {
      width: 100%;
      min-height: 110px;
      padding: 16px;
      border: none;
      border-radius: var(--radius);
      background: #fff6f2;
      box-shadow: var(--shadow);
      resize: vertical;
      font-family: inherit;
      line-height: 1.45;
    }

    .dynamic-list { display: flex; flex-direction: column; gap: 8px; }
    .list-item { display: flex; gap: 8px; align-items: center; }
    .bullet { width: 8px; height: 8px; border-radius: 50%; background: #ffb7b7; }

    .list-input {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 10px 14px;
      background: #fff6f2;
      box-shadow: var(--shadow);
    }

    .remove-btn {
      border: none;
      background: #ffe0e0;
      border-radius: 999px;
      padding: 6px 9px;
      cursor: pointer;
    }

    .add-item-btn {
      border: none;
      border-radius: 999px;
      padding: 8px 14px;
      background: var(--mint);
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow);
    }

    .actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .primary-btn {
      border: none;
      border-radius: 999px;
      padding: 14px 24px;
      background: #ffb7b7;
      box-shadow: var(--shadow);
      font-weight: 700;
      cursor: pointer;
    }

    .warning-box {
      background: linear-gradient(135deg,#ffe2eb,#e5fff7);
      padding: 16px 20px;
      border-radius: 22px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      border-left: 5px solid #ff8aa1;
      color: #a7527a;
      line-height: 1.45;
      margin-bottom: 14px;
      font-size: 1rem;
    }

    /* --- –¢–†–Ø–°–ö–ê --- */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }

    .shake {
      animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
    }
  </style>
</head>

<body>
  <div class="page" id="report">

    <div class="header">
      <h1>–û—Ç—á—ë—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–±–Ω–æ–≥–æ —É—Ä–æ–∫–∞</h1>
      <p>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —É—á–µ–Ω–∏–∫–∞</p>
    </div>

    <div class="info-grid">
      <div class="info-card">
        <span class="info-label">–ò–º—è —É—á–µ–Ω–∏–∫–∞ *</span>
        <input class="info-input required-field" id="studentName" type="text">
        <div class="error-text">–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</div>
      </div>

      <div class="info-card">
        <span class="info-label">–ò–º—è –ø–µ–¥–∞–≥–æ–≥–∞ *</span>
        <input class="info-input required-field" id="teacherName" type="text">
        <div class="error-text">–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</div>
      </div>

      <div class="info-card">
        <span class="info-label">–î–∞—Ç–∞ –∑–∞–Ω—è—Ç–∏—è *</span>
        <input class="info-input required-field" id="lessonDate" type="text">
        <div class="error-text">–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</div>
      </div>

      <div class="info-card">
        <span class="info-label">–ö–ª–∞—Å—Å *</span>
        <input class="info-input required-field" id="grade" type="text">
        <div class="error-text">–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</div>
      </div>
    </div>

    <section>
      <h2>üí¨ –û–±—â–µ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ</h2>
      <textarea placeholder="–ö–∞–∫ –ø—Ä–æ—à—ë–ª —É—Ä–æ–∫, —á—Ç–æ –∑–∞–º–µ—Ç–∏–ª–∏, –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –≤–∫–ª—é—á—ë–Ω–Ω–æ—Å—Ç—å..."></textarea>
    </section>

    <section>
      <h2>‚ú® –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h2>
      <div class="dynamic-list" id="strengths-list"></div>
      <button class="add-item-btn" data-target="strengths-list">Ôºã –î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç</button>
    </section>

    <section>
      <h2>üìå –ó–æ–Ω—ã —Ä–æ—Å—Ç–∞</h2>
      <div class="dynamic-list" id="growth-list"></div>
      <button class="add-item-btn" data-target="growth-list">Ôºã –î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç</button>
    </section>

    <section>
      <h2>üìö –ü—Ä–æ–±–µ–ª—ã –ø–æ —Ç–µ–º–∞–º</h2>
      <div class="dynamic-list" id="gaps-list"></div>
      <button class="add-item-btn" data-target="gaps-list">Ôºã –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–º—É</button>
    </section>

    <section>
      <h2>‚úî –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
      <div class="two-cols">
        <div>
          <label>–£—á–µ–Ω–∏–∫—É</label>
          <textarea placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ-–∫–æ–Ω—Å–ø–µ–∫—Ç, –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ñ–æ—Ä–º—É–ª—ã..."></textarea>
        </div>
        <div>
          <label>–†–æ–¥–∏—Ç–µ–ª—è–º</label>
          <textarea placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–µ–∂–∏–º, –Ω–µ —Ä—É–≥–∞—Ç—å –∑–∞ –æ—à–∏–±–∫–∏, –æ—Ç–º–µ—á–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å..."></textarea>
        </div>
      </div>
    </section>

    <section>
      <h2>üóì –ü–ª–∞–Ω –Ω–∞ –º–µ—Å—è—Ü</h2>
      <div class="weeks-wrap">
        <div class="week-box">
          <span class="week-title">–ù–µ–¥–µ–ª—è 1</span>
          <textarea placeholder="–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ."></textarea>
        </div>

        <div class="week-box">
          <span class="week-title">–ù–µ–¥–µ–ª—è 2</span>
          <textarea placeholder="–£–≥–ª—É–±–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ–º."></textarea>
        </div>

        <div class="week-box">
          <span class="week-title">–ù–µ–¥–µ–ª—è 3</span>
          <textarea placeholder="–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏."></textarea>
        </div>

        <div class="week-box">
          <span class="week-title">–ù–µ–¥–µ–ª—è 4</span>
          <textarea placeholder="–ü–æ–≤—Ç–æ—Ä, –∫–æ–Ω—Ç—Ä–æ–ª—å, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–∞."></textarea>
        </div>
      </div>
    </section>

    <section>
      <h2>üíó –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥</h2>
      <textarea placeholder="–û–±—â–µ–µ —Ä–µ–∑—é–º–µ –ø–æ —É—á–µ–Ω–∏–∫—É ‚Äî –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã, —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ —Ñ–æ–∫—É—Å –≤ —Ä–∞–±–æ—Ç–µ."></textarea>
    </section>

  </div>


  <div class="actions">
    <div class="warning-box">
      <strong style="font-size:1.1rem; display:block; margin-bottom:6px;">–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ! ‚ö†Ô∏è</strong>
      –ü—Ä–∏ –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –ø–æ–ª—è ‚Äî –æ–Ω–æ –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –ø—É—Å—Ç—ã–º.  
      –ï—Å–ª–∏ –ø–∏—Å–∞—Ç—å –Ω–µ—á–µ–≥–æ ‚Äî —Å—Ç–∞–≤—å—Ç–µ –ø—Ä–æ—á–µ—Ä–∫ –¥–ª—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç–∏.
    </div>

    <button class="primary-btn" id="download-btn">üì∏ –°–∫–∞—á–∞—Ç—å –∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫—É</button>

    <a class="primary-btn" href="https://t.me/lera_easy_math" target="_blank">
      ‚ú® –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª @lera_easy_math
    </a>
  </div>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>

  /* --- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–∏ --- */
  document.addEventListener("click", (e) => {
    if (e.target.closest(".add-item-btn")) {
      const container = document.getElementById(e.target.closest(".add-item-btn").dataset.target);
      const wrap = document.createElement("div");
      wrap.className = "list-item";
      wrap.innerHTML = `
        <div class='bullet'></div>
        <input class='list-input' type='text'>
        <button class='remove-btn'>√ó</button>
      `;
      container.appendChild(wrap);
    }

    if (e.target.closest(".remove-btn")) {
      e.target.closest(".list-item").remove();
    }
  });

  /* --- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π --- */
  function validateRequired() {
    let ok = true;
    let firstInvalid = null;

    document.querySelectorAll(".required-field").forEach(inp => {
      const err = inp.parentNode.querySelector(".error-text");

      inp.classList.remove("input-error", "shake");
      err.style.display = "none";

      if (!inp.value.trim()) {
        ok = false;

        inp.classList.add("input-error", "shake");
        err.style.display = "block";

        if (!firstInvalid) firstInvalid = inp;

        setTimeout(() => inp.classList.remove("shake"), 600);
      }
    });

    if (firstInvalid) {
      firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
    }

    return ok;
  }


  /* --- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (textarea ‚Üí div —Ñ–∏–∫—Å–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã) --- */
  document.getElementById("download-btn").onclick = async () => {
    if (!validateRequired()) return;

    const page = document.getElementById("report");
    const textareas = [...page.querySelectorAll("textarea")];
    const replicas = [];

    textareas.forEach(t => {
      const d = document.createElement("div");
      const css = getComputedStyle(t);
      const rect = t.getBoundingClientRect();   // ‚Üê —Ä–µ–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ textarea

      // –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫
      d.style.whiteSpace = "pre-wrap";
      d.style.wordWrap = "break-word";
      d.style.overflowWrap = "break-word";

      // —Ä–∞–∑–º–µ—Ä—ã
      d.style.width = rect.width + "px";
      d.style.minHeight = css.minHeight;

      // –∫–æ–ø–∏—Ä—É–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
      d.style.padding = css.padding;
      d.style.borderRadius = css.borderRadius;
      d.style.background = css.backgroundColor;
      d.style.boxShadow = css.boxShadow;
      d.style.font = css.font;
      d.style.color = css.color;
      d.style.lineHeight = css.lineHeight;

      // —Ç–µ–∫—Å—Ç
      d.textContent = t.value.trim() ? t.value : t.placeholder;

      // –∑–∞–º–µ–Ω–∞
      t.style.display = "none";
      t.after(d);

      replicas.push({ t, d });
    });

    // —Ä–µ–Ω–¥–µ—Ä
    const canvas = await html2canvas(page, { scale: 2 });

    // –≤–µ—Ä–Ω—É—Ç—å textarea –Ω–∞–∑–∞–¥
    replicas.forEach(pair => {
      pair.d.remove();
      pair.t.style.display = "";
    });

    // —Å–∫–∞—á–∞—Ç—å
    const link = document.createElement("a");
    link.download = "report.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  };

</script>
</body>
</html>
